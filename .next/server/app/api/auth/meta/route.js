"use strict";(()=>{var e={};e.id=227,e.ids=[227],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},6948:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>h,originalPathname:()=>$,patchFetch:()=>g,requestAsyncStorage:()=>_,routeModule:()=>m,serverHooks:()=>l,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>f});var r={};a.r(r),a.d(r,{GET:()=>u,dynamic:()=>d});var s=a(5419),n=a(9108),i=a(9678),o=a(8615),c=a(6113);let d="force-dynamic";async function u(e){let t=(0,c.randomBytes)(16).toString("hex"),a=process.env.META_APP_ID;if(!a||"your_meta_app_id"===a||"123456789"===a)return Response.json({error:"Configura\xe7\xe3o da Meta ausente (App ID n\xe3o configurado)"},{status:500});let r=(0,o.N6)(t);return Response.redirect(r)}let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/meta/route",pathname:"/api/auth/meta",filename:"route",bundlePath:"app/api/auth/meta/route"},resolvedPagePath:"C:\\Users\\ojuli\\AIOS\\meu-projeto\\app\\api\\auth\\meta\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:_,staticGenerationAsyncStorage:p,serverHooks:l,headerHooks:h,staticGenerationBailout:f}=m,$="/api/auth/meta/route";function g(){return(0,i.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:p})}},8615:(e,t,a)=>{a.d(t,{N6:()=>n,_z:()=>c,cE:()=>o,gt:()=>d,lz:()=>u,on:()=>m,p$:()=>i});let r="v19.0",s="https://graph.facebook.com";function n(e){let t=process.env.META_APP_ID?.trim()||"",a=process.env.META_REDIRECT_URI?.trim()||"",s=new URLSearchParams({client_id:t,redirect_uri:a,state:e,scope:"email,ads_management,ads_read,business_management",response_type:"code"});return`https://www.facebook.com/${r}/dialog/oauth?${s.toString()}`}async function i(e){let t=process.env.META_APP_ID?.trim()||"",a=process.env.META_APP_SECRET?.trim()||"",n=process.env.META_REDIRECT_URI?.trim()||"",i=new URLSearchParams({client_id:t,client_secret:a,redirect_uri:n,code:e}),o=await fetch(`${s}/${r}/oauth/access_token?${i.toString()}`),c=await o.json();if(c.error)throw Error(c.error.message);return c.access_token}async function o(e){let t=await fetch(`${s}/${r}/me/adaccounts?fields=id,name,account_id,currency&access_token=${e}`),a=(await t.json()).data||[];try{let t=`${s}/${r}/me/businesses?fields=id,name,owned_ad_accounts{id,name,account_id,currency},client_ad_accounts{id,name,account_id,currency}&access_token=${e}`,n=await fetch(t),i=await n.json();i.data&&i.data.forEach(e=>{e.owned_ad_accounts?.data&&a.push(...e.owned_ad_accounts.data),e.client_ad_accounts?.data&&a.push(...e.client_ad_accounts.data)})}catch(e){}return Array.from(new Map(a.map(e=>[e.id,e])).values())}async function c(e,t){let a=await fetch(`${s}/${r}/${e}/campaigns?fields=id,name,status,objective,daily_budget,lifetime_budget,created_time&access_token=${t}`),n=await a.json();if(n.error)throw Error(n.error.message);return n.data||[]}async function d(e,t){let a=await fetch(`${s}/${r}/${e}/adsets?fields=id,name,status,billing_event,bid_amount,daily_budget,lifetime_budget&access_token=${t}`),n=await a.json();if(n.error)throw Error(n.error.message);return n.data||[]}async function u(e,t){let a=await fetch(`${s}/${r}/${e}/adcreatives?fields=id,name,title,body,object_story_spec&access_token=${t}&limit=10`),n=await a.json();if(n.error)throw Error(n.error.message);return n.data||[]}async function m(e,t,a="maximum",n,i){let o;let c="spend,impressions,clicks,cpc,cpm,actions,conversions,purchase_roas,date_start",d=Array.isArray(e)?e.join(","):e;o=Array.isArray(e)&&e.length>1?`${s}/${r}/?ids=${d}&fields=insights{${c}${i?`,time_increment=${i}`:""}}&access_token=${t}`:`${s}/${r}/${d}/insights?fields=${c}&access_token=${t}${i?`&time_increment=${i}`:""}`,n?o+=`&time_range=${JSON.stringify(n)}`:o+=`&date_preset=${a}`;let u=await fetch(o),m=await u.json();if(m.error)throw Error(m.error.message);return Array.isArray(e)&&e.length>1?Object.values(m).map(e=>e.insights?.data?.[0]).filter(Boolean):m.data||[]}},5419:(e,t,a)=>{e.exports=a(517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[456],()=>a(6948));module.exports=r})();