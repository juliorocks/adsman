(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5480:function(e,t,a){Promise.resolve().then(a.bind(a,7819)),Promise.resolve().then(a.bind(a,9238)),Promise.resolve().then(a.bind(a,7989)),Promise.resolve().then(a.bind(a,8405)),Promise.resolve().then(a.bind(a,1581)),Promise.resolve().then(a.bind(a,5754)),Promise.resolve().then(a.t.bind(a,5250,23))},5508:function(e,t,a){"use strict";a.d(t,{MT:function(){return n},cN:function(){return r}}),a(5355);var s=a(3472);(0,s.$)("4fb5fd6735204f8ef004b0d6452a086dfd9e5bb1");var r=(0,s.$)("0cba707ea69ebefe44654560f96b9e2772cf258e"),n=(0,s.$)("2c1361a44ae66a236195ff49507cdcdc35bc6d7f")},7819:function(e,t,a){"use strict";a.r(t),a.d(t,{CampaignList:function(){return c}});var s=a(3827),r=a(7907),n=a(7898),l=a(4090),i=a(9259);let o=l.forwardRef((e,t)=>{let{className:a,checked:r,onCheckedChange:n,...l}=e;return(0,s.jsxs)("div",{className:"h-5 w-5 rounded-md border-2 flex items-center justify-center cursor-pointer transition-colors ".concat(r?"bg-emerald-600 border-emerald-600 text-white shadow-sm":"bg-white border-slate-300 hover:border-emerald-400"," ").concat(a),onClick:e=>{e.stopPropagation(),null==n||n(!r)},children:[r&&(0,s.jsx)(i.Z,{className:"h-4 w-4 stroke-[3px]"}),(0,s.jsx)("input",{type:"checkbox",className:"sr-only",checked:r,onChange:()=>{},ref:t,...l})]})});function c(e){var t;let{campaigns:a}=e,l=(0,r.useRouter)(),i=(0,r.usePathname)(),c=(0,r.useSearchParams)(),d=(null===(t=c.get("campaign_id"))||void 0===t?void 0:t.split(","))||[],m=e=>{let t=new URLSearchParams(c.toString()),a=[...d];a.includes(e)?a=a.filter(t=>t!==e):a.push(e),a.length>0?t.set("campaign_id",a.join(",")):t.delete("campaign_id"),l.push("".concat(i,"?").concat(t.toString()))};return(0,s.jsx)("div",{className:"space-y-4",children:0===a.length?(0,s.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:"Nenhuma campanha encontrada."}):a.map(e=>{let t=d.includes(e.id);return(0,s.jsxs)("div",{className:"flex items-center p-3 rounded-xl border transition-all cursor-pointer group ".concat(t?"bg-emerald-50 border-emerald-200 shadow-sm":"bg-white border-slate-100 hover:border-emerald-200 hover:bg-slate-50/50"),onClick:()=>m(e.id),children:[(0,s.jsx)("div",{className:"mr-3",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(o,{checked:t,onCheckedChange:()=>m(e.id),className:"border-slate-300 data-[state=checked]:bg-emerald-600 data-[state=checked]:border-emerald-600"})}),(0,s.jsx)("div",{className:"p-2 rounded-lg mr-3 ".concat(t?"bg-emerald-100 text-emerald-700":"bg-slate-50 text-slate-400 group-hover:bg-emerald-50 group-hover:text-emerald-600"),children:(0,s.jsx)(n.Z,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-semibold truncate ".concat(t?"text-emerald-900":"text-slate-700"),children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider ".concat("ACTIVE"===e.status?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"),children:e.status.toLowerCase()}),(0,s.jsxs)("span",{className:"text-[10px] text-slate-400",children:["Criada em ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]})]})]},e.id)})})}o.displayName="Checkbox"},9238:function(e,t,a){"use strict";a.r(t),a.d(t,{DateRangeSelector:function(){return i}});var s=a(3827),r=a(7907),n=a(7307);let l=[{label:"Hoje",value:"today"},{label:"Ontem",value:"yesterday"},{label:"\xdaltimos 7 dias",value:"last_7d"},{label:"\xdaltimos 30 dias",value:"last_30d"},{label:"Este m\xeas",value:"this_month"},{label:"M\xeas passado",value:"last_month"},{label:"M\xe1ximo",value:"maximum"},{label:"Personalizado",value:"custom"}];function i(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),a=t.get("date_preset")||"last_30d",i=t.get("since")||"",o=t.get("until")||"",c=a=>{let s=new URLSearchParams(t.toString());s.set("date_preset",a),"custom"!==a&&(s.delete("since"),s.delete("until")),e.push("/dashboard?".concat(s.toString()))},d=(a,s)=>{let r=new URLSearchParams(t.toString());r.set(a,s),e.push("/dashboard?".concat(r.toString()))};return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"}),(0,s.jsx)("select",{value:a,onChange:e=>c(e.target.value),className:"pl-10 pr-8 h-10 rounded-md border border-slate-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 appearance-none min-w-[160px]",children:l.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"custom"===a&&(0,s.jsxs)("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[(0,s.jsx)("input",{type:"date",value:i,onChange:e=>d("since",e.target.value),className:"h-10 px-3 rounded-md border border-slate-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-slate-400",children:"at\xe9"}),(0,s.jsx)("input",{type:"date",value:o,onChange:e=>d("until",e.target.value),className:"h-10 px-3 rounded-md border border-slate-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})}},7989:function(e,t,a){"use strict";a.r(t),a.d(t,{DraggableGrid:function(){return S}});var s=a(3827),r=a(4090),n=a(7135),l=a(4048),i=a(1216);function o(e){let{attributes:t,listeners:a,setNodeRef:r,transform:n,transition:o,isDragging:c}=(0,l.nB)({id:e.id}),d={transform:i.ux.Transform.toString(n),transition:o,zIndex:c?50:"auto",opacity:c?.3:1};return(0,s.jsx)("div",{ref:r,style:d,...t,...a,className:"cursor-move h-full",children:e.children})}var c=a(8219),d=a(6227),m=a(3716),u=a(9733),x=a(5032),h=a(822),p=a(2071),f=a(2800),g=a(5633),b=a(8967),v=a(3051);function j(e){let{title:t,value:a,subValue:r,description:n,trend:l,icon:i}=e;return(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-100 bg-white shadow-md p-6 hover:shadow-lg transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-primary-50 text-primary-600",children:(0,s.jsx)(i,{className:"h-6 w-6"})}),"neutral"!==l&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full ".concat("up"===l?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"),children:["up"===l?(0,s.jsx)(b.Z,{className:"h-3 w-3"}):(0,s.jsx)(v.Z,{className:"h-3 w-3"}),n]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-slate-500 mb-1",children:t}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsx)("div",{className:"text-3xl font-extrabold text-slate-900 tracking-tight",children:a}),r&&(0,s.jsx)("div",{className:"text-sm font-semibold text-slate-400",children:r})]})]})]})}var N=a(5754);let y={spend:{title:"Gasto Total",icon:c.Z,format:e=>"R$ ".concat(e.toLocaleString("pt-BR",{minimumFractionDigits:2}))},impressions:{title:"Impress\xf5es",icon:d.Z,format:e=>e.toLocaleString("pt-BR")},clicks:{title:"Cliques",icon:m.Z,format:e=>e.toLocaleString("pt-BR")},roas:{title:"ROAS Estimado",icon:u.Z,format:e=>"".concat(e,"x")},cpc:{title:"CPC M\xe9dio",icon:x.Z,format:e=>"R$ ".concat(e.toFixed(2))},ctr:{title:"CTR",icon:h.Z,format:e=>"".concat(e,"%")},cpm:{title:"CPM",icon:p.Z,format:e=>"R$ ".concat(e.toFixed(2))},conversions:{title:"Convers\xf5es",icon:f.Z,format:e=>e.toLocaleString("pt-BR")}},w=["spend","impressions","clicks","roas","cpc","ctr"];function S(e){let{metrics:t}=e,[a,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{let e=localStorage.getItem("dashboard_layout"),t=localStorage.getItem("dashboard_visible");e?i(JSON.parse(e)):i(w),t?u(new Set(JSON.parse(t))):u(new Set(w))},[]);let x=(e,t)=>{localStorage.setItem("dashboard_layout",JSON.stringify(e)),localStorage.setItem("dashboard_visible",JSON.stringify(t))},h=(0,n.Dy)((0,n.VT)(n.we),(0,n.VT)(n.Lg,{coordinateGetter:l.is})),p=e=>{let t=new Set(m);t.has(e)?t.delete(e):t.add(e),u(t);let s=[...a];s.includes(e)||(s.push(e),i(s)),x(s,Array.from(t))};return 0===a.length?null:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(N.Button,{variant:"ghost",size:"sm",className:"gap-2 text-slate-500 hover:text-primary-600 transition-colors ".concat(c?"bg-primary-50 text-primary-600":""),onClick:()=>d(!c),children:[(0,s.jsx)(g.Z,{className:"h-4 w-4"}),"Personalizar Dash"]})}),c&&(0,s.jsxs)("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl mb-6 animate-in fade-in slide-in-from-top-2",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-700 mb-3 px-2",children:"Escolha as m\xe9tricas vis\xedveis:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.keys(y).map(e=>(0,s.jsx)("button",{onClick:()=>p(e),className:"px-4 py-2 rounded-lg text-sm font-medium border transition-all ".concat(m.has(e)?"bg-primary-600 border-primary-600 text-white shadow-md shadow-primary-200":"bg-white border-slate-200 text-slate-500 hover:border-primary-300"),children:y[e].title},e))})]}),(0,s.jsx)(n.LB,{sensors:h,collisionDetection:n.pE,onDragEnd:function(e){let{active:t,over:s}=e;if(s&&t.id!==s.id){let e=a.indexOf(t.id),r=a.indexOf(s.id),n=(0,l.Rp)(a,e,r);i(n),x(n,Array.from(m))}},children:(0,s.jsx)(l.Fo,{items:a,strategy:l.U2,children:(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:a.filter(e=>m.has(e)).map(e=>{let a=y[e];return(0,s.jsx)(o,{id:e,children:(0,s.jsx)(j,{title:a.title,value:a.format(t[e]||0),subValue:"roas"===e?"(R$ ".concat((t.total_revenue||0).toLocaleString("pt-BR",{minimumFractionDigits:2}),")"):void 0,description:"Per\xedodo selecionado",trend:"up",icon:a.icon})},e)})})})})]})}},8405:function(e,t,a){"use strict";a.r(t),a.d(t,{ManualRevenueModal:function(){return x}});var s=a(3827),r=a(4090),n=a(94),l=a(7759),i=a(2235),o=a(7307),c=a(8994),d=a(9259),m=a(5754),u=a(5508);function x(e){let{initialDate:t,initialAmount:a,forceOpen:x=!1,onClose:h}=e,[p,f]=(0,r.useState)(x),[g,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(t||new Date().toISOString().split("T")[0]),[N,y]=(0,r.useState)(a||""),[w,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f(x),t&&j(t),a&&y(a)},[x,t,a]);let k=()=>{f(!1),h&&h()},C=async e=>{e.preventDefault(),b(!0);try{await (0,u.cN)(v,parseFloat(N)),S(!0),setTimeout(()=>{S(!1),x||y(""),k()},1e3)}catch(e){alert("Erro ao salvar faturamento")}finally{b(!1)}};return(0,s.jsxs)(s.Fragment,{children:[!x&&(0,s.jsxs)(m.Button,{onClick:()=>f(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white gap-2",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),"Lan\xe7ar Faturamento"]}),p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:(0,s.jsx)(l.Z,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-bold text-slate-900",children:[t?"Editar":"Lan\xe7ar"," Faturamento"]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Para c\xe1lculo de ROAS de alta precis\xe3o"})]})]}),(0,s.jsx)("button",{onClick:k,className:"text-slate-400 hover:text-slate-600",children:(0,s.jsx)(i.Z,{className:"h-5 w-5"})})]}),(0,s.jsxs)("form",{onSubmit:C,className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"})," Data da Venda"]}),(0,s.jsx)("input",{type:"date",value:v,onChange:e=>j(e.target.value),className:"w-full p-2.5 rounded-lg border border-slate-200 focus:ring-2 focus:ring-emerald-500 outline-none text-slate-900",required:!0,disabled:!!t})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Valor Faturado (R$)"}),(0,s.jsx)("input",{type:"number",step:"0.01",placeholder:"0,00",value:N,onChange:e=>y(e.target.value),className:"w-full p-2.5 rounded-lg border border-slate-200 focus:ring-2 focus:ring-emerald-500 outline-none text-lg font-bold text-slate-900",required:!0,autoFocus:!0})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(m.Button,{type:"button",variant:"ghost",className:"flex-1",onClick:k,disabled:g,children:"Cancelar"}),(0,s.jsx)(m.Button,{type:"submit",className:"flex-1 transition-all ".concat(w?"bg-green-600":"bg-emerald-600 hover:bg-emerald-700"),disabled:g||w,children:g?(0,s.jsx)(c.Z,{className:"h-4 w-4 animate-spin"}):w?(0,s.jsx)(d.Z,{className:"h-4 w-4"}):"Salvar Altera\xe7\xf5es"})]})]})]})})]})}},1581:function(e,t,a){"use strict";a.r(t),a.d(t,{PerformanceChart:function(){return d}});var s=a(3827),r=a(4090),n=a(8219),l=a(3716),i=a(6227),o=a(9733);let c=[{id:"spend",label:"Gasto",icon:n.Z,color:"#6366f1",format:e=>"R$ ".concat(e.toFixed(2))},{id:"clicks",label:"Cliques",icon:l.Z,color:"#8b5cf6",format:e=>e.toLocaleString()},{id:"impressions",label:"Impress\xf5es",icon:i.Z,color:"#0ea5e9",format:e=>e.toLocaleString()},{id:"roas",label:"ROAS",icon:o.Z,color:"#10b981",format:e=>"".concat(e.toFixed(2),"x")}];function d(e){let{data:t}=e,[a,n]=(0,r.useState)("spend"),l=(0,r.useMemo)(()=>c.find(e=>e.id===a)||c[0],[a]),i=(0,r.useMemo)(()=>{if(!t||0===t.length)return[];let e=t.map(e=>e[a]||0),s=Math.min(...e),r=Math.max(...e,1)-s||1;return t.map((e,n)=>({x:n/(t.length-1)*100,y:100-((e[a]||0)-s)/r*80-10,value:e[a],date:new Date(e.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}))},[t,a]),o=(0,r.useMemo)(()=>i.length<2?"":"M ".concat(i.map(e=>"".concat(e.x,",").concat(e.y)).join(" L ")),[i]),d=(0,r.useMemo)(()=>i.length<2?"":"".concat(o," L 100,100 L 0,100 Z"),[i,o]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:c.map(e=>(0,s.jsxs)("button",{onClick:()=>n(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all duration-300 ".concat(a===e.id?"bg-slate-900 text-white shadow-lg scale-105":"bg-white border border-slate-100 text-slate-500 hover:bg-slate-50"),children:[(0,s.jsx)(e.icon,{className:"h-3.5 w-3.5 ".concat(a===e.id?"text-white":"text-slate-400")}),e.label]},e.id))}),(0,s.jsxs)("div",{className:"relative h-[300px] w-full group",children:[(0,s.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"h-full w-full overflow-visible",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"chartGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:l.color,stopOpacity:"0.2"}),(0,s.jsx)("stop",{offset:"100%",stopColor:l.color,stopOpacity:"0"})]})}),[0,25,50,75,100].map(e=>(0,s.jsx)("line",{x1:"0",y1:e,x2:"100",y2:e,stroke:"#f1f5f9",strokeWidth:"0.1"},e)),(0,s.jsx)("path",{d:d,fill:"url(#chartGradient)",className:"transition-all duration-1000 ease-in-out"}),(0,s.jsx)("path",{d:o,fill:"none",stroke:l.color,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-1000 ease-in-out drop-shadow-lg",style:{filter:"drop-shadow(0 4px 6px ".concat(l.color,"44)")}}),i.map((e,t)=>(0,s.jsx)("circle",{cx:e.x,cy:e.y,r:"0.8",fill:"white",stroke:l.color,strokeWidth:"0.4",className:"opacity-0 group-hover:opacity-100 transition-all duration-500 delay-100"},t))]}),(0,s.jsx)("div",{className:"absolute inset-x-0 -bottom-6 flex justify-between px-1",children:i.filter((e,t)=>t%Math.ceil(i.length/6)==0).map((e,t)=>(0,s.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tighter",children:e.date},t))})]})]})}},5754:function(e,t,a){"use strict";a.r(t),a.d(t,{Button:function(){return c},buttonVariants:function(){return o}});var s=a(3827),r=a(4090),n=a(6371),l=a(9769),i=a(1657);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-600 text-primary-foreground hover:bg-primary-600/90 text-white",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,s.jsx)(m,{className:(0,i.cn)(o({variant:r,size:l,className:a})),ref:t,...d})});c.displayName="Button"},1657:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(3167),r=a(1367);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[150,419,765,971,69,744],function(){return e(e.s=5480)}),_N_E=e.O()}]);